<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screen & Keyboard Tool Pro</title>
    <style>
        :root {
            --bg: #0b0f1a;
            --card: #161b2c;
            --accent: #3b82f6;
            --success: #22c55e;
            --text: #f8fafc;
            --key-bg: #2d3748;
            --danger: #ef4444;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', system-ui, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        }

        .main-menu { text-align: center; width: 100%; max-width: 600px; padding: 20px; }

        .wake-lock-btn {
            width: 100%; padding: 40px; font-size: 28px; font-weight: 800; border: none;
            border-radius: 24px; background: var(--accent); color: white; cursor: pointer;
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.3); transition: all 0.3s; margin-bottom: 30px;
        }

        .wake-lock-btn.active { background: var(--success); }

        .mode-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .mode-btn { padding: 20px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); background: var(--card); color: white; font-weight: 600; cursor: pointer; }

        .overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 100; flex-direction: column; justify-content: center; align-items: center;
        }

        /* Klavye Yerleimi */
        .keyboard-wrapper { display: flex; gap: 20px; padding: 30px; background: var(--card); border-radius: 20px; transform: scale(0.9); }
        .keyboard-grid { display: flex; flex-direction: column; gap: 6px; }
        .numpad-grid { display: grid; grid-template-columns: repeat(3, 45px); gap: 6px; border-left: 2px solid #2d3748; padding-left: 20px; }

        .keyboard-row { display: flex; justify-content: center; gap: 4px; }

        .key {
            min-width: 40px; height: 40px; background: var(--key-bg); border-radius: 6px;
            display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; transition: 0.1s;
        }

        /* zel Tu Boyutlar覺 */
        .key[data-code="Space"] { width: 200px; }
        .key[data-code="Backspace"] { width: 80px; }
        .key[data-code="Enter"] { width: 90px; }
        .key[data-code="ShiftLeft"], .key[data-code="ShiftRight"] { width: 100px; }
        .key[data-code="CapsLock"] { width: 70px; }

        .key.pressed { background: var(--success); color: var(--bg); transform: translateY(2px); }
        .key.tested { border: 2px solid var(--success); color: var(--success); }

        .clean-header { font-size: 60px; font-weight: 900; color: var(--danger); }
        #last-key-display { font-size: 100px; font-weight: 900; color: var(--success); min-height: 130px; }
        .exit-info { position: absolute; bottom: 30px; color: #475569; font-size: 16px; }
    </style>
</head>
<body>

    <div class="main-menu">
        <button class="wake-lock-btn" id="wakeBtn" onclick="toggleWakeLock()">Ekran Kapanmas覺n覺 Engelle</button>
        <div class="mode-grid">
            <button class="mode-btn" onclick="openMode('test-mode')">剁 Klavye Testi</button>
            <button class="mode-btn" onclick="openMode('clean-mode')">完 Klavye Temizlii</button>
        </div>
    </div>

    <div id="test-mode" class="overlay">
        <div class="keyboard-wrapper">
            <div class="keyboard-grid" id="mainKb"></div>
            <div class="numpad-grid" id="numKb"></div>
        </div>
        <div class="exit-info">Ayr覺lmak i癟in <b>Ctrl + C</b> (Esc Engellenmitir)</div>
    </div>

    <div id="clean-mode" class="overlay" style="background: #000;">
        <div class="clean-header">TEM襤ZL襤K MODU</div>
        <div id="last-key-display"></div>
        <div class="exit-info">D繹nmek i癟in <b>Ctrl + C</b></div>
    </div>

<script>
    let wakeLock = null;
    let currentMode = null;

    // 1. Uyan覺k Tutma
    async function toggleWakeLock() {
        const btn = document.getElementById('wakeBtn');
        if (!wakeLock) {
            try { wakeLock = await navigator.wakeLock.request('screen'); btn.innerText = "Ekran Kapanmas覺 Engellendi"; btn.classList.add('active'); } catch(e){}
        } else {
            wakeLock.release(); wakeLock = null; btn.innerText = "Ekran Kapanmas覺n覺 Engelle"; btn.classList.remove('active');
        }
    }

    // 2. Klavye Verisi (code bazl覺 alg覺lama i癟in)
    const mainKeys = [
        ["Escape", "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11", "F12"],
        ["Backquote", "Digit1", "Digit2", "Digit3", "Digit4", "Digit5", "Digit6", "Digit7", "Digit8", "Digit9", "Digit0", "Minus", "Equal", "Backspace"],
        ["Tab", "KeyQ", "KeyW", "KeyE", "KeyR", "KeyT", "KeyY", "KeyU", "KeyI", "KeyO", "KeyP", "BracketLeft", "BracketRight", "Enter"],
        ["CapsLock", "KeyA", "KeyS", "KeyD", "KeyF", "KeyG", "KeyH", "KeyJ", "KeyK", "KeyL", "Semicolon", "Quote", "Backslash"],
        ["ShiftLeft", "IntlBackslash", "KeyZ", "KeyX", "KeyC", "KeyV", "KeyB", "KeyN", "KeyM", "Comma", "Period", "Slash", "ShiftRight"],
        ["ControlLeft", "MetaLeft", "AltLeft", "Space", "AltRight", "ContextMenu", "ControlRight"]
    ];

    const numpadKeys = ["NumLock", "NumpadDivide", "NumpadMultiply", "Numpad7", "Numpad8", "Numpad9", "Numpad4", "Numpad5", "Numpad6", "Numpad1", "Numpad2", "Numpad3", "Numpad0", "NumpadDecimal", "NumpadEnter"];

    function buildKB() {
        const mainKb = document.getElementById('mainKb');
        mainKeys.forEach(row => {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'keyboard-row';
            row.forEach(code => {
                const k = document.createElement('div');
                k.className = 'key';
                k.dataset.code = code;
                k.innerText = code.replace("Key","").replace("Digit","").replace("Left","").replace("Right","");
                rowDiv.appendChild(k);
            });
            mainKb.appendChild(rowDiv);
        });

        const numKb = document.getElementById('numKb');
        numpadKeys.forEach(code => {
            const k = document.createElement('div');
            k.className = 'key';
            k.dataset.code = code;
            k.innerText = code.replace("Numpad","");
            numKb.appendChild(k);
        });
    }
    buildKB();

    // 3. Mod Kontrol羹
    function openMode(id) {
        currentMode = id;
        document.documentElement.requestFullscreen().catch(()=>{});
        document.getElementById(id).style.display = 'flex';
    }

    function closeAllModes() {
        document.exitFullscreen().catch(()=>{});
        document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none');
        currentMode = null;
    }

    // 4. Tu Dinleyici
    window.addEventListener('keydown', (e) => {
        if (e.ctrlKey && e.key.toLowerCase() === 'c') { closeAllModes(); return; }
        if (!currentMode) return;

        // Esc ve dierlerini engelle
        e.preventDefault(); 
        
        const keyEl = document.querySelector(`[data-code="${e.code}"]`);
        if (keyEl) {
            keyEl.classList.add('pressed');
            keyEl.classList.add('tested');
        }

        if (currentMode === 'clean-mode') {
            document.getElementById('last-key-display').innerText = e.code.replace("Key","");
        }
    });

    window.addEventListener('keyup', (e) => {
        const keyEl = document.querySelector(`[data-code="${e.code}"]`);
        if (keyEl) keyEl.classList.remove('pressed');
    });

    // Esc ile tam ekrandan 癟覺k覺 uyar覺s覺 (Browser kural覺 gerei)
    document.addEventListener('fullscreenchange', () => {
        if (!document.fullscreenElement && currentMode) {
            // Kullan覺c覺 Esc ile zorla 癟覺kt覺ysa modu kapatm覺yoruz, sadece bilgi veriyoruz
            console.log("Kullan覺c覺 tam ekrandan 癟覺kt覺.");
        }
    });
</script>
</body>
</html>
